<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Visual Corp | Mega Promociones de Aniversario</title>
  <meta name="description" content="Mega promociones por aniversario de Visual Corp. Precios con IVA + diseño incluido. Envíos a nivel nacional." />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="Visual Corp | Mega Promociones de Aniversario" />
  <meta property="og:locale" content="es_EC" />

  <link rel="icon" href="https://d1so26dimrz1o2.cloudfront.net/uploads/avatars/g32HrUdRExn93slL9Joo4T2nYbEXrN7Pog52QeH8.jpg">
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">

  <style>
    /* ===== ESTILOS BASE Y NUEVA PALETA DE COLORES ===== */
    :root{
      --bg:#0b0d10; --panel:#111318; --muted:#979aa3; --text:#f4f6fb;
      --brand:#f2b705; --accent:var(--brand); --success:#25D366;
      --sep:rgba(255,255,255,.08); --ring:rgba(242,183,5,.6);
      --ease:cubic-bezier(.22,.84,.36,1);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial;
      color:var(--text);
      background:radial-gradient(1200px 800px at 10% -10%, #1a1c23 0%, #0b0d10 60%);
    }
    .wrap{max-width:1200px;margin:auto;padding:22px}

    /* ===== COMPONENTES ACTUALIZADOS ===== */
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(8,9,12,.6);
      backdrop-filter:blur(10px);
      border-bottom:1px solid var(--sep);
      padding:10px 18px;
      border-radius:20px;
      margin: 12px 0;
    }
    .header-content{
      max-width: 1200px; margin-inline: auto;
      display:flex; gap:16px; align-items:center; justify-content:space-between;
    }
    .brand{display:flex;align-items:center;gap:14px}
    .brand img{width:50px;height:50px;border-radius:14px;object-fit:cover;border:2px solid var(--accent);box-shadow:0 0 0 4px rgba(242,183,5,.12)}
    .title{font-weight:700}
    .badge{display:inline-flex;gap:8px;align-items:center;background:#1a1d24;border:1px solid var(--sep);border-radius:999px;padding:8px 12px;color:var(--muted);font-weight:600}
    .badge b{color:var(--text)}
    .badge i{color:var(--accent)}

    .hero{
      margin:18px 0 10px; padding:28px; border-radius:24px;
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--sep);
    }
    .hero h1{margin:12px 0 8px;font-size:clamp(1.8rem, 4vw, 2.8rem);font-weight:800; line-height:1.1;}
    .hero p{margin:0;color:var(--muted)}
    .hero .actions{display:flex; flex-wrap:wrap; gap:12px; margin-top:18px}

    .countdown{margin-top:20px;display:grid;grid-template-columns:repeat(4, minmax(0,1fr));gap:12px;max-width:520px}
    .cbox{background:#0f1217;border:1px solid var(--sep);border-radius:14px;text-align:center;padding:10px 6px}
    .cbox b{display:block;font-size:clamp(1.5rem, 4vw, 2rem);line-height:1;color:var(--accent)}
    .cbox span{font-size:.8rem;color:var(--muted)}

    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fill, minmax(320px, 1fr));}
    .card{
      background:var(--panel); border:1px solid var(--sep); border-radius:20px;
      padding:16px; overflow:hidden;
      display:grid; grid-template-columns:140px 1fr; gap:16px; align-items:center;
    }
    .imgBox{height:140px;width:140px;position:relative}
    .imgBox img{
      position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
      max-width:100%; max-height:150%;
      object-fit:contain; cursor:pointer;
    }
    .content h3{margin:0 0 4px;font-size:1.1rem}
    .content .meta{color:var(--muted);font-size:.9rem;margin-bottom:8px}
    .price{display:inline-block;background:var(--accent);color:#111;font-weight:800;border-radius:12px;padding:6px 10px;margin:6px 6px 0 0}
    .labels{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}
    .label{border:1px solid var(--sep);border-radius:999px;padding:6px 10px;color:var(--muted);font-size:.85rem;background:#14151a}
    
    .actions{margin-top:12px;display:flex;flex-direction:column;gap:10px;flex-wrap:wrap}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:12px 18px;
      border-radius:14px;font-weight:600;background:#1a1d24;color:#fff;
      border:1px solid var(--sep); text-decoration:none; cursor:pointer; font-family:inherit; font-size: 1rem;
    }
    
    /* --- Estilos para botones de asesores --- */
    .asesores-links { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn.asesor-btn {
      padding: 8px 10px;
      font-size: 0.8rem;
      font-weight: 700;
      flex: 1 1 0; /* Clave para que tengan el mismo tamaño */
      background-color: #2c313a;
      border-color: var(--sep);
    }
    .btn.asesor-btn:hover { background-color: #3d4452; }
    
    /* --- Estilos para la barra de redes sociales --- */
    .sticky-cta{position:fixed; inset:auto 0 16px; z-index:40; display:flex; justify-content:center; pointer-events:none}
    .social-links {
      pointer-events: auto;
      display: flex;
      align-items: center;
      gap: 18px;
      background: var(--panel);
      padding: 10px 22px;
      border-radius: 999px;
      border: 1px solid var(--sep);
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .social-links a {
      font-size: 1.5rem;
      color: var(--text);
      text-decoration: none;
      transition: color .2s ease, transform .2s ease;
    }
    .social-links a.contact-link {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--muted);
    }
    .social-links a:hover { color: var(--accent); transform: scale(1.15) translateY(-2px); }

    .foot{margin:40px 0 8px;padding: 0 10px; color:var(--muted);font-size:.92rem;text-align:right;}

    /* --- Splash Screen --- */
    .splash-screen{position:fixed;inset:0;background:rgba(0,0,0,.9);backdrop-filter:blur(10px);z-index:2000;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;cursor:pointer;opacity:1;transition:opacity .5s ease}
    .splash-screen img{max-width:90vw;max-height:70vh;object-fit:contain;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.5)}
    .splash-screen small{color:var(--muted);font-weight:600;background:var(--panel);padding:8px 16px;border-radius:999px}
    .splash-screen.hidden{opacity:0;pointer-events:none}

    /* ===== ANIMATIONS PACK ===== */
    header{transition: box-shadow .35s var(--ease), transform .35s var(--ease);}
    header.scrolled{box-shadow:0 10px 30px rgba(0,0,0,.45);transform:translateY(-2px) scale(1.01);}
    @keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}
    .hero{animation:fadeUp .6s var(--ease) .05s both;}
    .countdown .cbox{opacity:0;transform:translateY(8px);animation:fadeUp .5s var(--ease) forwards;}
    .countdown .cbox:nth-child(1){animation-delay:.15s}
    .countdown .cbox:nth-child(2){animation-delay:.25s}
    .countdown .cbox:nth-child(3){animation-delay:.35s}
    .countdown .cbox:nth-child(4){animation-delay:.45s}
    .card{will-change:transform,opacity,filter;transition:transform .6s var(--ease),opacity .6s var(--ease),filter .6s var(--ease);}
    .card:not(.is-visible){opacity:.001;transform:translateY(18px) scale(.98);filter:blur(6px);}
    .card.is-visible{opacity:1;transform:none;filter:none;}
    @keyframes pop{0%{transform:scale(.92)}40%{transform:scale(1.08)}100%{transform:scale(1)}}
    .card.is-visible .price{animation:pop .5s var(--ease) both;}
    .card.is-visible .price:nth-of-type(2){animation-delay:.05s}
    .card.is-visible .price:nth-of-type(3){animation-delay:.1s}
    .card.is-visible .price:nth-of-type(4){animation-delay:.15s}
    .imgBox img{transition:transform .25s var(--ease),filter .25s var(--ease);}
    .card.is-visible .imgBox img{filter:drop-shadow(0 8px 18px rgba(0,0,0,.35));transform:translate(-50%,-50%) scale(1.02);}
    .imgBox img:hover{transform:translate(-50%,-50%) scale(1.08);}
    @keyframes shine{from{background-position:200% 0}to{background-position:-200% 0}}
    .label{background:linear-gradient(110deg,#14151a 30%,rgba(255,255,255,.06) 50%,#14151a 70%);background-size:200% 100%;}
    .card.is-visible .label{animation:shine 1.2s ease both;}
    .btn{transition:transform .18s var(--ease), box-shadow .18s var(--ease);}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,.35);}
    .btn:active{transform:translateY(0) scale(.98);}
    .lightbox{position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,.8);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .35s var(--ease), visibility .35s var(--ease);}
    .lightbox.open{opacity:1;visibility:visible;pointer-events:auto;}
    .lightbox img{max-width:min(96vw, 900px); max-height:82vh; border-radius:20px; border:1px solid var(--sep); transform:scale(.96); transition:transform .35s var(--ease);}
    .lightbox.open img{transform:scale(1);}
    @keyframes pulse{0%{text-shadow:0 0 0 var(--ring)}50%{text-shadow:0 0 16px var(--ring)}100%{text-shadow:0 0 0 var(--ring)}}
    .cbox b.pulse{animation:pulse .5s ease;}
    @media (prefers-reduced-motion:reduce){*{animation:none !important;transition:none !important;}}

    /* ===== CONFETTI CANVAS ===== */
    #confetti-canvas{position:fixed;inset:0;z-index:999;pointer-events:none;opacity:0;transition:opacity .35s var(--ease);}
    #confetti-canvas.show{opacity:1;}
  </style>
</head>
<body>
  <canvas id="confetti-canvas" aria-hidden="true"></canvas>

  <div class="splash-screen" id="splash-screen">
    <img src="img/publicidad-bienvenida.png" alt="Publicidad de Aniversario Visual Corp" />
    <small>Toca para continuar</small>
  </div>
  
  <div class="wrap">
    <header>
      <div class="header-content">
        <div class="brand">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRmSKnD00M-kkEpOeoGxEL9UP7_Zfgf8Ug33Q&s" alt="Logo Visual Corp" />
          <div>
            <div class="title">Visual Corp</div>
            <div class="badge"><i class="fa-regular fa-circle-check"></i><b>IVA + Diseño</b></div>
          </div>
        </div>
        <div class="badge"><i class="fa-solid fa-truck-fast"></i> Envíos a nivel nacional</div>
      </div>
    </header>

    <section class="hero">
      <span class="badge">🎉 ¡CELEBRA CON NOSOTROS!</span>
      <h1>Mega Promociones de Aniversario</h1>
      <p>Aprovecha precios especiales por tiempo limitado. Válido solo en <b>Octubre</b>. Cupos limitados.</p>
      <div class="actions">
        <button class="btn" data-confetti>🎊 Lanzar Confeti</button>
      </div>
      <div class="countdown" aria-label="Cuenta regresiva a fin de octubre">
        <div class="cbox"><b id="cd-days">00</b><span>Días</span></div>
        <div class="cbox"><b id="cd-hours">00</b><span>Horas</span></div>
        <div class="cbox"><b id="cd-mins">00</b><span>Min</span></div>
        <div class="cbox"><b id="cd-secs">00</b><span>Seg</span></div>
      </div>
    </section>

    <section class="grid" aria-label="Promociones">
      
      <article class="card">
        <div class="imgBox"><img src="img/rollup.png" alt="Roll Up"/></div>
        <div class="content">
          <h3>Roll Up 80×200 cm</h3>
          <div class="meta">Incluye bolso de obsequio</div>
          <span class="price">1 × $50</span><span class="price">3 × $120</span>
          <span class="price">6 × $210</span><span class="price">12 × $360</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="imgBox"><img src="img/bannerx.png" alt="Banner X"/></div>
        <div class="content">
          <h3>Banner X (60×160 cm)</h3>
          <div class="meta">Diseño + bolso gratis</div>
          <span class="price">1 × $30</span><span class="price">3 × $75</span>
          <span class="price">6 × $140</span><span class="price">12 × $240</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="imgBox"><img src="img/luminoso.png" alt="Rótulo luminoso"/></div>
        <div class="content">
          <h3>Rótulo Luminoso</h3>
          <div class="meta">Desde $70 — Instalación gratis</div>
          <span class="price">Consultar</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>
      
      <article class="card">
        <div class="imgBox"><img src="img/stand.png" alt="Stand publicitario"/></div>
        <div class="content">
          <h3>Stand Publicitario</h3>
          <div class="meta">+ bolso de obsequio</div>
          <span class="price">1 × $130</span><span class="price">3 × $300</span>
          <span class="price">6 × $540</span><span class="price">12 × $1000</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="imgBox"><img src="img/etiquetas.png" alt="Etiquetas troqueladas"/></div>
        <div class="content">
          <h3>Etiquetas Troqueladas</h3>
          <div class="meta">Millar 5×5 cm</div>
          <span class="price">$30</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

       <article class="card">
        <div class="imgBox"><img src="img/corporeo.png" alt="Letras 3D"/></div>
        <div class="content">
          <h3>Corpóreos (Letras 3D)</h3>
          <div class="meta">Desde $400 — 10 letras, 30 cm alto</div>
          <span class="price">Consultar</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="imgBox"><img src="img/cintra.png" alt="Plancha de cintra"/></div>
        <div class="content">
          <h3>Plancha de Cintra 3mm</h3>
          <div class="meta">220 × 140 cm (≈ $33/m²)</div>
          <span class="price">$100</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="imgBox"><img src="img/vidrio.png" alt="Placa de vidrio"/></div>
        <div class="content">
          <h3>Reconocimientos en Vidrio</h3>
          <div class="meta">Descuentos por docena</div>
          <span class="price">Consultar</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="imgBox"><img src="img/dummy.png" alt="Dummy inflable"/></div>
        <div class="content">
          <h3>Dummies Inflables</h3>
          <div class="meta">Personalizados</div>
          <span class="price">$300</span>
          <div class="actions">
            <div class="asesores-links">
              <a class="btn asesor-btn" href="https://wa.me/message/LASEIEUO6HPBD1" target="_blank" rel="noopener">Asesor 1</a>
              <a class="btn asesor-btn" href="https://wa.me/593997078212" target="_blank" rel="noopener">Asesor 2</a>
              <a class="btn asesor-btn" href="https://wa.me/593989260442" target="_blank" rel="noopener">Asesor 3</a>
            </div>
          </div>
        </div>
      </article>

    </section>

    <div class="foot" id="contacto">
      © <span id="year"></span> Visual Corp · Milagro, Ecuador · @visualcorpec
    </div>
  </div>

  <div class="sticky-cta">
    <div class="social-links">
      <a href="https://visualcorp-ec.github.io/contacto/" target="_blank" rel="noopener" class="contact-link">Contáctanos</a>
      <a href="https://www.facebook.com/visualcorpec" target="_blank" rel="noopener" aria-label="Facebook"><i class="fa-brands fa-facebook"></i></a>
      <a href="https://www.instagram.com/visualcorpec" target="_blank" rel="noopener" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
      <a href="https://www.tiktok.com/@visualcorpmilagro" target="_blank" rel="noopener" aria-label="TikTok"><i class="fa-brands fa-tiktok"></i></a>
    </div>
  </div>

  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Vista ampliada">
    <img id="lightboxImg" alt="Vista ampliada" />
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const splash = document.getElementById('splash-screen');
    if (sessionStorage.getItem('hasVisited')) {
      splash.style.display = 'none';
    } else {
      splash.addEventListener('click', () => {
        splash.classList.add('hidden');
        sessionStorage.setItem('hasVisited', 'true');
      });
    }
    const headerEl = document.querySelector('header');
    const onScroll = () => headerEl.classList.toggle('scrolled', window.scrollY > 8);
    onScroll();
    window.addEventListener('scroll', onScroll, { passive:true });
    const lightboxEl = document.getElementById('lightbox');
    const lightboxImgEl = document.getElementById('lightboxImg');
    function openLightbox(src, alt = '') {
      lightboxImgEl.src = src;
      lightboxImgEl.alt = alt;
      lightboxEl.classList.add('open');
    }
    function closeLightbox() {
      lightboxEl.classList.remove('open');
    }
    document.querySelectorAll('.imgBox img').forEach(img => {
      img.addEventListener('click', () => openLightbox(img.src, img.alt));
    });
    lightboxEl.addEventListener('click', e => {
      if (e.target === lightboxEl) closeLightbox();
    });
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('is-visible');
          io.unobserve(e.target);
        }
      });
    }, { threshold: .15 });
    document.querySelectorAll('.card').forEach(c => io.observe(c));
    (function startCountdown() {
      const target = new Date(new Date().getFullYear(), 9, 31, 23, 59, 59);
      const el = {
        d: document.getElementById('cd-days'), h: document.getElementById('cd-hours'),
        m: document.getElementById('cd-mins'), s: document.getElementById('cd-secs')
      };
      function pad(n) { return String(n).padStart(2, '0'); }
      function tick() {
        let diff = (target - Date.now()) / 1000; if(diff < 0) diff = 0;
        const d = Math.floor(diff / 86400);
        const h = Math.floor((diff % 86400) / 3600);
        const m = Math.floor((diff % 3600) / 60);
        const s = Math.floor(diff % 60);
        el.d.textContent = pad(d); el.h.textContent = pad(h);
        el.m.textContent = pad(m); el.s.textContent = pad(s);
        Object.values(el).forEach(n => { n.classList.remove('pulse'); void n.offsetWidth; n.classList.add('pulse'); });
      }
      tick(); setInterval(tick, 1000);
    })();
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      let w, h, dpr;
      function resize(){
        dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        w = canvas.width = Math.floor(innerWidth * dpr);
        h = canvas.height = Math.floor(innerHeight * dpr);
        canvas.style.width = innerWidth+'px'; canvas.style.height = innerHeight+'px';
        ctx.setTransform(1,0,0,1,0,0); ctx.scale(dpr, dpr);
      }
      resize(); addEventListener('resize', resize);
      const COLORS = ['#ffd54a', '#ff7e2a', '#ff4dab', '#6f70ff', '#62c2ff', '#22c55e'];
      const TAU = Math.PI*2;
      let raf, startTime = 0, duration = 0, particles = [];
      function rand(min, max){return Math.random()*(max-min)+min;}
      function spawn(count){
        for(let i=0;i<count;i++){
          particles.push({
            x:rand(0,innerWidth),y:-20,size:rand(6,12),
            vx:rand(-60,60),vy:rand(50,180),ay:rand(40,90),
            rot:rand(0,TAU),vr:rand(-4,4),
            color:COLORS[(Math.random()*COLORS.length)|0],
            shape:Math.random()<.5?'rect':'circle',
            life:rand(2.2,4.2),t:0
          });
        }
      }
      function draw(p){
        ctx.save();
        ctx.translate(p.x,p.y); ctx.rotate(p.rot);
        ctx.globalAlpha = Math.max(0,1-p.t/p.life);
        ctx.fillStyle = p.color;
        if(p.shape==='rect'){ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size);}
        else{ctx.beginPath();ctx.arc(0,0,p.size/2,0,TAU);ctx.fill();}
        ctx.restore();
      }
      function update(dt){
        ctx.clearRect(0,0,innerWidth,innerHeight);
        particles.forEach(p=>{
          p.vy+=(p.ay*dt); p.x+=p.vx*dt; p.y+=p.vy*dt; p.rot+=p.vr*dt; p.t+=dt;
          draw(p);
        });
        particles=particles.filter(p=>p.t<p.life&&p.y<innerHeight+40);
      }
      function loop(ts){
        if(!startTime)startTime=ts;
        const elapsed=(ts-startTime)/1000;
        const dt=Math.min(.033,(raf?(ts-(loop._last||ts))/1000:0));
        loop._last=ts;
        if(elapsed<duration){spawn(Math.round(prefersReduced?4:12));}
        update(dt);
        if(elapsed<duration||particles.length){raf=requestAnimationFrame(loop);}
        else{cancel();}
      }
      function cancel(){
        canvas.classList.remove('show');
        cancelAnimationFrame(raf); raf=null; particles.length=0; startTime=0; duration=0;
        ctx.clearRect(0,0,innerWidth,innerHeight);
      }
      function start(ms=4000){
        if(prefersReduced)return;
        cancel();
        duration=ms/1000; startTime=0; loop._last=0; canvas.classList.add('show');
        raf=requestAnimationFrame(loop);
      }
      document.addEventListener('DOMContentLoaded',()=>start(3800));
      document.addEventListener('click',(e)=>{if(e.target.closest('[data-confetti]'))start(3800);},true);
    })();
  </script>
</body>
</html>
